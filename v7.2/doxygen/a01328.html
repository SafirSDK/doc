<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Safir SDK Core: Safir::Dob::EntityInjectionBase Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="iconic_logotype.64.png"/></td>
  <td id="projectalign">
   <div id="projectname">Safir SDK Core
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('a01328.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="a01325.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Safir::Dob::EntityInjectionBase Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This Consumer Base class contains callback methods that can be overridden by an entity handler that registers a handler for an entity type that can potentially be injected outside the control of the handler itself.  
 <a href="a01328.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="a00155_source.html">Safir/Dob/Consumer.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for Safir::Dob::EntityInjectionBase:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a01327.svg" width="371" height="294"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for Safir::Dob::EntityInjectionBase:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a01326.svg" width="212" height="203"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a4ef8e79e21ea2322aa2aff86b1ca3c03" id="r_a4ef8e79e21ea2322aa2aff86b1ca3c03"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01328.html#a4ef8e79e21ea2322aa2aff86b1ca3c03">OnInjectedNewEntity</a> (const <a class="el" href="a01348.html">Safir::Dob::InjectedEntityProxy</a> injectedEntityProxy)</td></tr>
<tr class="memdesc:a4ef8e79e21ea2322aa2aff86b1ca3c03"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when a new entity is about to be injected in the system.  <br /></td></tr>
<tr class="separator:a4ef8e79e21ea2322aa2aff86b1ca3c03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ecdd9d03745d92e8dd13166bb94a10a" id="r_a9ecdd9d03745d92e8dd13166bb94a10a"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01328.html#a9ecdd9d03745d92e8dd13166bb94a10a">OnInjectedUpdatedEntity</a> (const <a class="el" href="a01348.html">Safir::Dob::InjectedEntityProxy</a> injectedEntityProxy)</td></tr>
<tr class="memdesc:a9ecdd9d03745d92e8dd13166bb94a10a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when an updated entity is about to be injected in the system.  <br /></td></tr>
<tr class="separator:a9ecdd9d03745d92e8dd13166bb94a10a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06c8360f65f225ca20e9265dc486b9be" id="r_a06c8360f65f225ca20e9265dc486b9be"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01328.html#a06c8360f65f225ca20e9265dc486b9be">OnInjectedDeletedEntity</a> (const <a class="el" href="a01348.html">Safir::Dob::InjectedEntityProxy</a> injectedEntityProxy)</td></tr>
<tr class="memdesc:a06c8360f65f225ca20e9265dc486b9be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when an entity delete is about to be injected in the system.  <br /></td></tr>
<tr class="separator:a06c8360f65f225ca20e9265dc486b9be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e2b2c6a78ccd895335883779054a98b" id="r_a9e2b2c6a78ccd895335883779054a98b"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01328.html#a9e2b2c6a78ccd895335883779054a98b">OnInitialInjectionsDone</a> (const <a class="el" href="a00383.html#add598341f70c143ad35a701a65884214">Safir::Dob::Typesystem::TypeId</a> typeId, const <a class="el" href="a01468.html">Safir::Dob::Typesystem::HandlerId</a> &amp;handlerId)</td></tr>
<tr class="memdesc:a9e2b2c6a78ccd895335883779054a98b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates that all initial injection data has been transfered to the handler.  <br /></td></tr>
<tr class="separator:a9e2b2c6a78ccd895335883779054a98b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_a01324"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_a01324')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="a01324.html">Safir::Dob::EntityRequestBase</a></td></tr>
<tr class="memitem:a99f8a8d48e97f3b2cf7ef3ededc75f96 inherit pub_methods_a01324" id="r_a99f8a8d48e97f3b2cf7ef3ededc75f96"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01324.html#a99f8a8d48e97f3b2cf7ef3ededc75f96">~EntityRequestBase</a> ()</td></tr>
<tr class="memdesc:a99f8a8d48e97f3b2cf7ef3ededc75f96 inherit pub_methods_a01324"><td class="mdescLeft">&#160;</td><td class="mdescRight">Virtual destructor is needed since we have virtual member functions.  <br /></td></tr>
<tr class="separator:a99f8a8d48e97f3b2cf7ef3ededc75f96 inherit pub_methods_a01324"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a206d3dd2d8d915c55c91126d14b3830f inherit pub_methods_a01324" id="r_a206d3dd2d8d915c55c91126d14b3830f"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01324.html#a206d3dd2d8d915c55c91126d14b3830f">OnCreateRequest</a> (const <a class="el" href="a01344.html">Safir::Dob::EntityRequestProxy</a> entityRequestProxy, <a class="el" href="a00381.html#a30e66ca69078fcb031dab0fcd3cd7c7c">Safir::Dob::ResponseSenderPtr</a> responseSender)=0</td></tr>
<tr class="memdesc:a206d3dd2d8d915c55c91126d14b3830f inherit pub_methods_a01324"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when someone requests an entity to be created.  <br /></td></tr>
<tr class="separator:a206d3dd2d8d915c55c91126d14b3830f inherit pub_methods_a01324"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9444a77428f8966e03e779d971058ce9 inherit pub_methods_a01324" id="r_a9444a77428f8966e03e779d971058ce9"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01324.html#a9444a77428f8966e03e779d971058ce9">OnUpdateRequest</a> (const <a class="el" href="a01344.html">Safir::Dob::EntityRequestProxy</a> entityRequestProxy, <a class="el" href="a00381.html#a30e66ca69078fcb031dab0fcd3cd7c7c">Safir::Dob::ResponseSenderPtr</a> responseSender)=0</td></tr>
<tr class="memdesc:a9444a77428f8966e03e779d971058ce9 inherit pub_methods_a01324"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when someone requests an entity to be updated.  <br /></td></tr>
<tr class="separator:a9444a77428f8966e03e779d971058ce9 inherit pub_methods_a01324"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a764c5f08442e27f81e549fda1863860c inherit pub_methods_a01324" id="r_a764c5f08442e27f81e549fda1863860c"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01324.html#a764c5f08442e27f81e549fda1863860c">OnDeleteRequest</a> (const <a class="el" href="a01344.html">Safir::Dob::EntityRequestProxy</a> entityRequestProxy, <a class="el" href="a00381.html#a30e66ca69078fcb031dab0fcd3cd7c7c">Safir::Dob::ResponseSenderPtr</a> responseSender)=0</td></tr>
<tr class="memdesc:a764c5f08442e27f81e549fda1863860c inherit pub_methods_a01324"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when someone requests an entity to be deleted.  <br /></td></tr>
<tr class="separator:a764c5f08442e27f81e549fda1863860c inherit pub_methods_a01324"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_a01312"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_a01312')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="a01312.html">Safir::Dob::Internal::ConsumerBase</a></td></tr>
<tr class="memitem:ac8c0bf7dd7446b5ddf96d0b201826c94 inherit pub_methods_a01312" id="r_ac8c0bf7dd7446b5ddf96d0b201826c94"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01312.html#ac8c0bf7dd7446b5ddf96d0b201826c94">~ConsumerBase</a> ()</td></tr>
<tr class="separator:ac8c0bf7dd7446b5ddf96d0b201826c94 inherit pub_methods_a01312"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This Consumer Base class contains callback methods that can be overridden by an entity handler that registers a handler for an entity type that can potentially be injected outside the control of the handler itself. </p>
<p>Examples of when an entity is injected outside the control of a handler includes persistent data at startup time and entities received from other system installations (multi-owned entities).</p>
<p>The handler can reject the injection by invoking Delete for the received entity.</p>
<p>In case the handler has no need to be informed when an entity is about to be injected it can rely on the default implementation which just accepts the injected entity.</p>
<p>An example of a situation where a handler needs to act on injected data is when the entity has members that are references (EntityIds) to other entity instances, and the lifetime of the pointed-to instance is completly connected to the lifetime of the referer. If an entity has been injected it is the responsibility of the local handler to traverse the entity instance graph, find changed references, and delete the unreferenced entity instances. To support this task there are methods in the <a class="el" href="a01348.html" title="Proxy class for entity injections.">InjectedEntityProxy</a> class to read the previous entity state and find invalid refrences.</p>
<p>Another example is when an injection relates only to some of the members (might be the case when updates are received from external systems) and the handler wants to maintain some sort of consistency between different members. In this case the handler can call <a class="el" href="a01256.html#a98f50d5919abdf1fc0bf87a78c1ea47f" title="Discard the currently dispatched injected entity instance and wait for an update.">ConnectionAspectPostpone::IncompleteInjectionState</a> to wait for more updates before the new state is set. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a9e2b2c6a78ccd895335883779054a98b" name="a9e2b2c6a78ccd895335883779054a98b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e2b2c6a78ccd895335883779054a98b">&#9670;&#160;</a></span>OnInitialInjectionsDone()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void Safir::Dob::EntityInjectionBase::OnInitialInjectionsDone </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="a00383.html#add598341f70c143ad35a701a65884214">Safir::Dob::Typesystem::TypeId</a>&#160;</td>
          <td class="paramname"><em>typeId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a01468.html">Safir::Dob::Typesystem::HandlerId</a> &amp;&#160;</td>
          <td class="paramname"><em>handlerId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Indicates that all initial injection data has been transfered to the handler. </p>
<p>In connection to the completion of an entity registration, the <a class="el" href="a00381.html" title="This namespace contains all functionality of the DOB (Components DOSE and DOTS).">Dob</a> will transfer initial injection data to the handler. This method indicates that all such data has been transfered, and thus, enables an effective handling of the initial injection data by the handler.</p>
<p>This method is guaranteed to be called once for each invocation of the following methods: (This is true even when there is no initial injection data at all) </p><ul>
<li><a class="el" href="a01260.html#a0c604509cc20d38d897dd3454156ab59" title="Register an entity handler that also gets informed about injected entities.">ConnectionBase::RegisterEntityHandlerInjection</a> </li>
<li><a class="el" href="a01260.html#adc67106462885bed8199148d5875b39f" title="Pending registration of a handler for a given entity type.">ConnectionBase::RegisterEntityHandlerPending</a></li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">typeId</td><td>- Type id in corresponding registration. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">handlerId</td><td>- Handler id in corresponding registration. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a06c8360f65f225ca20e9265dc486b9be" name="a06c8360f65f225ca20e9265dc486b9be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06c8360f65f225ca20e9265dc486b9be">&#9670;&#160;</a></span>OnInjectedDeletedEntity()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void Safir::Dob::EntityInjectionBase::OnInjectedDeletedEntity </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="a01348.html">Safir::Dob::InjectedEntityProxy</a>&#160;</td>
          <td class="paramname"><em>injectedEntityProxy</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called when an entity delete is about to be injected in the system. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">injectedEntityProxy</td><td>- Proxy object containing information about the entity about to be deleted. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4ef8e79e21ea2322aa2aff86b1ca3c03" name="a4ef8e79e21ea2322aa2aff86b1ca3c03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ef8e79e21ea2322aa2aff86b1ca3c03">&#9670;&#160;</a></span>OnInjectedNewEntity()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void Safir::Dob::EntityInjectionBase::OnInjectedNewEntity </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="a01348.html">Safir::Dob::InjectedEntityProxy</a>&#160;</td>
          <td class="paramname"><em>injectedEntityProxy</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called when a new entity is about to be injected in the system. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">injectedEntityProxy</td><td>- Proxy object containing entity and meta information about the new entity that is about to be injected. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9ecdd9d03745d92e8dd13166bb94a10a" name="a9ecdd9d03745d92e8dd13166bb94a10a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ecdd9d03745d92e8dd13166bb94a10a">&#9670;&#160;</a></span>OnInjectedUpdatedEntity()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void Safir::Dob::EntityInjectionBase::OnInjectedUpdatedEntity </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="a01348.html">Safir::Dob::InjectedEntityProxy</a>&#160;</td>
          <td class="paramname"><em>injectedEntityProxy</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called when an updated entity is about to be injected in the system. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">injectedEntityProxy</td><td>- Proxy object containing entity and meta information about the updated entity that is about to be injected. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="a00379.html">Safir</a></li><li class="navelem"><a class="el" href="a00381.html">Dob</a></li><li class="navelem"><a class="el" href="a01328.html">EntityInjectionBase</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
